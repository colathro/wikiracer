FROM mcr.microsoft.com/dotnet/aspnet:5.0

ARG COSMOS_KEY
ARG STORAGE_KEY
ARG ENCRYPTION_KEY
ARG GITHUB_KEY

ENV COSMOS_KEY ${COSMOS_KEY}
ENV STORAGE_KEY ${STORAGE_KEY}
ENV ENCRYPTION_KEY ${ENCRYPTION_KEY}
ENV GITHUB_KEY ${GITHUB_KEY}

WORKDIR app/

COPY --chown=myuser:myuser out/ .

EXPOSE 80 443 2222

ENTRYPOINT dotnet WebServer/WebServer.dll